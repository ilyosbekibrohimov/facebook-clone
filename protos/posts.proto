syntax = "proto3";


message  UploadPost{
  message Request{
    string title = 1;
    string content = 2;
    bytes  picture_blob = 3;
  }
  message  Response {
    bool success = 1;
  }
}

message FetchPostDetails{
  message Request{
    int32 post_id = 1;
  }
  message Response{
    bool  success = 1;
    string title = 2;
    string content = 3;
    bytes pictureBlob = 4;
  }
}

message FetchPostsByPage{
  message Request{
    int32 pageNumber = 1;
  }

  message Response{
    repeated int32 id = 1;
    repeated string title = 2;
    repeated string content = 3;
    repeated bytes pictureBlob = 4;
    bool success = 5;

  }

}


//rpcs
service PostService{
  rpc uploadPost(UploadPost.Request) returns (UploadPost.Response) {}
  rpc fetchPostDetails(FetchPostDetails.Request) returns (FetchPostDetails.Response) {}
  rpc fetchPosts(FetchPostsByPage.Request) returns (FetchPostsByPage.Response){}
}

//generate files in dart
//protoc -I=protos --dart_out=grpc:lib/generated_files posts.proto

//common grpc errors:
//https://grpc.github.io/grpc/core/md_doc_statuscodes.html